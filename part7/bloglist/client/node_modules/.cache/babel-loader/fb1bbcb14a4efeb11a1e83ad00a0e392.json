{"ast":null,"code":"var _jsxFileName = \"/home/averywlittle/code/fullstackopen/part7/bloglist/client/src/components/BlogList.js\";\nimport React, { useState, useEffect } from 'react';\nimport Blog from '../components/Blog';\nimport blogService from '../services/blogs';\n\nconst BlogList = () => {\n  const [blogs, setBlogs] = useState([]);\n  useEffect(() => {\n    blogService.getAll().then(blogs => setBlogs(blogs));\n  }, []);\n\n  const likeBlog = async blog => {\n    try {\n      const newBlog = {\n        user: blog.user,\n        title: blog.title,\n        author: blog.author,\n        url: blog.url,\n        likes: blog.likes + 1\n      };\n      const savedBlog = await blogService.update(newBlog, blog.id);\n\n      if (savedBlog) {\n        console.log('blog like', savedBlog);\n        let newBlogList = [...blogs];\n        const index = newBlogList.findIndex(blog => {\n          return blog.id === savedBlog.id ? true : false;\n        });\n\n        if (index !== -1) {\n          newBlogList[index] = savedBlog;\n          setBlogs(newBlogList);\n        }\n      }\n    } catch (exception) {\n      console.error('like blog exception', exception);\n    }\n  };\n\n  const removeBlog = async id => {\n    try {\n      const removeStatus = await blogService.remove(id);\n\n      if (removeStatus === 204) {\n        console.log('remove status', removeStatus);\n        const newBlogList = [...blogs];\n        const updatedBlogList = newBlogList.filter(blog => {\n          return blog.id === id ? false : true;\n        });\n        setBlogs(updatedBlogList);\n      }\n    } catch (exception) {\n      console.error('remove blog exception', exception);\n    }\n  };\n\n  return React.createElement(\"div\", {\n    className: \"blog-list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, blogs.sort((a, b) => b.likes - a.likes).map(blog => React.createElement(Blog, {\n    key: blog.id,\n    blog: blog,\n    user: blog.user.name,\n    likeBlog: likeBlog,\n    removeBlog: removeBlog,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  })));\n};\n\nexport default BlogList;","map":{"version":3,"sources":["/home/averywlittle/code/fullstackopen/part7/bloglist/client/src/components/BlogList.js"],"names":["React","useState","useEffect","Blog","blogService","BlogList","blogs","setBlogs","getAll","then","likeBlog","blog","newBlog","user","title","author","url","likes","savedBlog","update","id","console","log","newBlogList","index","findIndex","exception","error","removeBlog","removeStatus","remove","updatedBlogList","filter","sort","a","b","map","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Blog from '../components/Blog'\nimport blogService from '../services/blogs'\n\nconst BlogList = () => {\n    const [blogs, setBlogs] = useState([])\n\n    useEffect(() => {\n        blogService.getAll().then(blogs =>\n        setBlogs( blogs )\n        )\n    }, [])\n\n    const likeBlog = async (blog) => {\n        try {\n          const newBlog = {\n            user: blog.user,\n            title: blog.title,\n            author: blog.author,\n            url: blog.url,\n            likes: blog.likes + 1\n          }\n    \n          const savedBlog = await blogService.update(newBlog, blog.id)\n          if (savedBlog) {\n            console.log('blog like', savedBlog)\n            let newBlogList = [...blogs]\n            const index = newBlogList.findIndex((blog) => { return blog.id === savedBlog.id ? true : false })\n    \n            if (index !== -1) {\n              newBlogList[index] = savedBlog\n              setBlogs(newBlogList)\n            }\n          }\n    \n        } catch (exception) {\n          console.error('like blog exception', exception)\n        }\n    }\n    \n    const removeBlog = async (id) => {\n        try {\n\n            const removeStatus = await blogService.remove(id)\n            if (removeStatus === 204) {\n            console.log('remove status', removeStatus)\n\n            const newBlogList = [...blogs]\n\n            const updatedBlogList = newBlogList.filter((blog) => { return blog.id === id ? false : true })\n\n            setBlogs(updatedBlogList)\n            }\n\n        } catch (exception) {\n            console.error('remove blog exception', exception)\n        }\n    }\n\n    return (\n        <div className=\"blog-list\">\n            {blogs.sort((a, b) => b.likes - a.likes).map(blog =>\n                <Blog key={blog.id} blog={blog} user={blog.user.name} likeBlog={likeBlog} removeBlog={removeBlog} />\n            )}\n        </div>\n    )\n}\n\nexport default BlogList\n\n"]},"metadata":{},"sourceType":"module"}