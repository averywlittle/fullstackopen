{"ast":null,"code":"var _jsxFileName = \"/home/averywlittle/code/fullstackopen/part7/bloglist/client/src/components/BlogList.js\";\nimport React, { useState, useEffect, connect } from 'react';\nimport Blog from '../components/Blog';\nimport blogService from '../services/blogs';\n\nconst BlogList = props => {\n  const likeBlog = async blog => {\n    try {\n      const newBlog = {\n        user: blog.user,\n        title: blog.title,\n        author: blog.author,\n        url: blog.url,\n        likes: blog.likes + 1\n      };\n      const savedBlog = await blogService.update(newBlog, blog.id);\n\n      if (savedBlog) {\n        console.log('blog like', savedBlog);\n        let newBlogList = [...blogs];\n        const index = newBlogList.findIndex(blog => {\n          return blog.id === savedBlog.id ? true : false;\n        });\n\n        if (index !== -1) {\n          newBlogList[index] = savedBlog;\n          setBlogs(newBlogList);\n        }\n      }\n    } catch (exception) {\n      console.error('like blog exception', exception);\n    }\n  };\n\n  const removeBlog = async id => {\n    try {\n      const removeStatus = await blogService.remove(id);\n\n      if (removeStatus === 204) {\n        console.log('remove status', removeStatus);\n        const newBlogList = [...blogs];\n        const updatedBlogList = newBlogList.filter(blog => {\n          return blog.id === id ? false : true;\n        });\n        setBlogs(updatedBlogList);\n      }\n    } catch (exception) {\n      console.error('remove blog exception', exception);\n    }\n  };\n\n  return React.createElement(\"div\", {\n    className: \"blog-list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, props.blogs.sort((a, b) => b.likes - a.likes).map(blog => React.createElement(Blog, {\n    key: blog.id,\n    blog: blog,\n    user: blog.user.name,\n    likeBlog: likeBlog,\n    removeBlog: removeBlog,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  })));\n};\n\nconst mapStateToProps = state => {\n  return {\n    blogs: state.blogs\n  };\n};\n\nconst ConnectedBlogList = connect(mapStateToProps, null)(BlogList);\nexport default ConnectedBlogList;","map":{"version":3,"sources":["/home/averywlittle/code/fullstackopen/part7/bloglist/client/src/components/BlogList.js"],"names":["React","useState","useEffect","connect","Blog","blogService","BlogList","props","likeBlog","blog","newBlog","user","title","author","url","likes","savedBlog","update","id","console","log","newBlogList","blogs","index","findIndex","setBlogs","exception","error","removeBlog","removeStatus","remove","updatedBlogList","filter","sort","a","b","map","name","mapStateToProps","state","ConnectedBlogList"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, connect } from 'react'\nimport Blog from '../components/Blog'\nimport blogService from '../services/blogs'\n\nconst BlogList = (props) => {\n\n    const likeBlog = async (blog) => {\n        try {\n          const newBlog = {\n            user: blog.user,\n            title: blog.title,\n            author: blog.author,\n            url: blog.url,\n            likes: blog.likes + 1\n          }\n    \n          const savedBlog = await blogService.update(newBlog, blog.id)\n          if (savedBlog) {\n            console.log('blog like', savedBlog)\n            let newBlogList = [...blogs]\n            const index = newBlogList.findIndex((blog) => { return blog.id === savedBlog.id ? true : false })\n    \n            if (index !== -1) {\n              newBlogList[index] = savedBlog\n              setBlogs(newBlogList)\n            }\n          }\n    \n        } catch (exception) {\n          console.error('like blog exception', exception)\n        }\n    }\n    \n    const removeBlog = async (id) => {\n        try {\n\n            const removeStatus = await blogService.remove(id)\n            if (removeStatus === 204) {\n            console.log('remove status', removeStatus)\n\n            const newBlogList = [...blogs]\n\n            const updatedBlogList = newBlogList.filter((blog) => { return blog.id === id ? false : true })\n\n            setBlogs(updatedBlogList)\n            }\n\n        } catch (exception) {\n            console.error('remove blog exception', exception)\n        }\n    }\n\n    return (\n        <div className=\"blog-list\">\n            {props.blogs.sort((a, b) => b.likes - a.likes).map(blog =>\n                <Blog key={blog.id} blog={blog} user={blog.user.name} likeBlog={likeBlog} removeBlog={removeBlog} />\n            )}\n        </div>\n    )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    blogs: state.blogs\n  }\n}\n\nconst ConnectedBlogList = connect(\n  mapStateToProps,\n  null\n)(BlogList)\nexport default ConnectedBlogList\n\n"]},"metadata":{},"sourceType":"module"}